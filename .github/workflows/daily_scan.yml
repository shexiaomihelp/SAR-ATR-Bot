# 檔案路徑: .github/workflows/daily_scan.yml

name: Daily Stock Scan (Mode 1)

on:
  schedule:
    # 每天早上 8:30 (台北時間) 運行
    - cron: '30 00 * * *'
  # 允許手動觸發
  workflow_dispatch: 

jobs:
  run_daily_scan:
    runs-on: ubuntu-latest
    
    steps:
      - name: 檢查程式碼
        uses: actions/checkout@v4
        
      - name: 設置 Python 環境
        uses: actions/setup-python@v5
        with:
          python-version: '3.x'
          
      - name: 安裝依賴套件
        run: |
          pip install yfinance pandas pandas-ta requests
          
      - name: 運行每日選股掃描
        # 這裡將 GitHub Secrets 裡的 LINE_TOKEN 傳遞給 Python 程式
        env:
          LINE_TOKEN: ${{ secrets.LINE_TOKEN }}
        run: |
          python trading_scanner.py
